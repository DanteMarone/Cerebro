# Interactive Visual Debugger

The Interactive Visual Debugger is a development tool within Cerebro designed to help developers trace and understand the agent's decision-making process, LLM interactions, and tool usage.

## How to Access

- **Menu:** Navigate to `View -> Show Debugger`.
- **Shortcut:** Press `Ctrl+Shift+D`.

## How to Enable/Disable Debugging

Event collection for the debugger is disabled by default to ensure optimal performance for regular use. You can enable it in two ways:

1.  **Via the Debugger Window (Current Session):**
    - Open the debugger window.
    - Check the "Enable Debugging" checkbox in the toolbar.
    - This enables event collection for the current application session only. The checkbox state is not saved.

2.  **Via Main Application Settings (Persistent):**
    - Open Cerebro's main settings dialog (e.g., `File -> Settings` or `Ctrl+,`).
    - Find and check the "Enable Interactive Debugger" option.
    - Save the settings.
    - This will enable (or disable) debugger event collection by default when Cerebro starts. The Debugger Window's checkbox will reflect this persistent setting upon opening.

**Note:** Events are only captured by the `DebuggerService` when debugging is explicitly enabled through one of these methods.

## UI Overview

The debugger window is split into several key areas:

- **Toolbar:**
  - **Enable Debugging Checkbox:** Toggles event collection for the current session. Reflects the persistent setting on load.
  - **Refresh Events Button:** Manually reloads and displays all events collected in the current session by the `DebuggerService`.
  - **Clear Session Button:** Clears all events currently stored in the debugger's memory and from the display.
  - **Previous Event Button:** Navigates to and highlights the previous event in the list.
  - **Next Event Button:** Navigates to and highlights the next event in the list.

- **Event List (Left Pane):**
  - Displays a chronological list of captured debug events.
  - Each event has a summary format, typically including:
    `Timestamp | [EVENT_TYPE] | Agent: AgentName | Event-specific details...`
  - Example: `14:35:10.123 | [LLM_REQ] | Agent: Default Agent | Model: llama3`

- **Event Details (Right Pane):**
  - When an event is selected from the Event List, this pane shows the full event data in JSON format. This allows for detailed inspection of all parameters and values associated with the event.

## Main Event Types Captured

The debugger captures various types of events. Key ones include:

- **`UserMessageEvent`**: User input submitted to an agent.
- **`AgentRequestEvent`**: An agent is being invoked (e.g., due to user input or tool result).
- **`LLMRequestEvent`**: A request being made to the LLM, including the full prompt, model, and parameters.
- **`AgentThoughtEvent`**: Intermediate thinking steps generated by an agent (if enabled).
- **`LLMResponseEvent`**: The raw response received from the LLM, including any parsed content or tool requests.
- **`ToolCallEvent`**: An agent requesting a tool execution, with tool name and arguments.
- **`ToolResultEvent`**: The outcome of a tool execution.
- **`AgentHandoffEvent`**: When a Coordinator agent hands off a task to a Specialist agent.
- **`ErrorEvent`**: Errors that occur, typically within the `AIWorker` or tool execution.

For the exact structure of these events, refer to the Pydantic models defined in `debugger_events.py`.

## Notes for Developers

- **Performance:** While efforts are made to keep it lightweight, enabling the debugger (and thus event collection) can introduce a minor performance overhead, especially during very rapid interactions. Disable it via settings for regular use if not actively debugging.
- **Data Storage:** Debug events are stored in memory for the current application session. Clearing the session or closing Cerebro will discard these events. They are not persisted to disk beyond the enable/disable setting itself.
